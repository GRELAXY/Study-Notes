# 上位机（寒培）

==学长介绍开开眼的具体要自己去学==

- [推荐b站的up鱼香]([鱼香ROS机器人的个人空间-鱼香ROS机器人个人主页-哔哩哔哩视频](https://space.bilibili.com/1940177928))





## 简介

___

上位机需要安装专门的控制软件或监控软件。这些软件具有友好的**人机交互界面**，工程师或操作人员通过这个界面可以直观地**设置**各种参数、发送控制**指令**，还能实**时查看**下位机的运行状态、采集到的数据等信息。



##  铺垫

相关内容

1. Linux是一个开源的操作系统内核（和windows是同一个层级的概念）

    *比起Windows更依赖命令行操作*

2. Ubuntu 就是依赖于Linux内核的完整操作系统版本。战队中主要在Ubuntu上使用ROS（机器人操作系统）



 ==--->于是乎：需要熟练掌握Linux的命令行操作==



## 一、 Linux系统的命令行操作(简)

*前置：在Ubuntu里面快捷键`Ctrl+Alt+T`进入命令窗口*



___



### 1. 路径操作

- `pwd`  :查看当前路径

- `cd 文件名` :进入下一个文件

- `cd ..` :回到上一级目录

- `ls` : 列出当前目录下的文件夹



___



### 2. 文件操作

- `mkdir 文件名` : 在当前目录下 新建**文件夹**
- `rm` 文件名 ： 删除**文件**  
- `rm -d 文件名`：删除**文件夹** 
- `find 文件名 -delete`:递归删除**目录及其内容**
- `touch 文件名` ： 在当前目录下新建**文件**（记得带后缀 `.c` `.py` `.txt`）
- `mv 文件名 想要移动到的文件夹名` : 移动当前目录的文件名到另外一个文件夹里
- `cp 文件名 想要复制到的文件夹名`: 复制当前目录的文件名到另外一个文件夹里
- `nano 文件名`：进入终端文本编辑工具nano对文件进行编辑
- `cat 文件民`：查看文件中的内容
- `history`:显示用户在终端输入过的命令
- `chmod a+x 文件名 `：给文件可执行文件（ls后可执行的文件是绿色的，直接输入文件名就可以运行了）



### 3. 获得帮助

`操作系统名 --help `： 忘记命令可以使用help来进行查询

如`ros --help`



### 4. 权限提升

`sudo + 命令`

*会要求输入用户密码*



### 5. bash 和dash

`bash`：切换bash解释器[^1]（默认）

`dash`:  切换dash解释器

### 6. echo
- 一个输出打印指令
- 如：echo hello ros则就会输出hello ros

如何找到ROS的版本呢-> `echo $ROS_VERSION`(ROS_VERSION,存了相关内容的环境变量)
用`printenv`来查看所有的环境变量

### export

修改环境变量，直接export 环境变量名= ...


___



## 二、ROS 2 (简)

ROS 2 一个用于开发机器人应用程序的框架，帮助搭建复杂机器人系统。简要理解：一个安装在上位机的能够帮助操控机器人的工具



*战队：主要用于定位和视觉*

___



### 1. 一些基本概念

- 工作空间：粗浅理解 ，工程的所有代码都存放在一个文件夹里，这个文件夹就是工作空间。一个工作空间一般包括 build（编译） 、 install（构建） 、 log（日志） 、 src（source源代码） 四个文件夹，上三个基本是系统自己生成.
- 功能包： 把能够实现一个功能的代码打包成一个包，即功能包。包含四个文件 Cmake，Lists.txt、package.xml 、(一些链接编译文件，定义包的数据及其构建规则）、include 、src 。==功能包要写在工作空间的src文件夹下==
- 节点 ： ROS 2 系统中最小逻辑单元，负责执行特定任务或功能。==节点要卸载功能包的src文件夹下==



### 2. 安装

![image-20250129203334216](C:\Users\Maihanwen\AppData\Roaming\Typora\typora-user-images\image-20250129203334216.png)

`wget http://fishros.com/install -O fishros && . fishros` 命令行键入，很多一键安装！（鱼神！！！）

- 俺得记得俺的版本是==jazzy==好吧其实也有rolling



### 3. 创建编译运行

*如上图所示*

- 工作空间和功能包创建：`ros2 pkg create pakage_name`系统会自动创建所提的四个文件

- 工作空间编译：`colcon build`

- 节点运行：`ros2 run package_name node_name`

  
  
    

___



### 4.代码编写

ROS2的代码编写主要使用python或者C++来编写的

初学来说python够用，但以后深入的话底层的东西需要用c++捏



____

### 5. 节点交互 - 四大通信机制

ROS2中引入DDS协议，节点通过话题(topics)、服务(services)、动作(action)、参数(parameters)四种方式进行信息交流。

主要使用：

#### - 话题（Topic）

异步，有先后顺序。先有一个节点发布数据，其他节点才能订阅数据、回复。



#### - 服务 （Service）

同步，一个节点发送请求，另一个节点立即应答并发送数据，接收方可以进行回复



#### - 参数 （Parameter）

用于机器人参数的设置和读取




#### - 动作 （Action）

支持复杂行为的通信方式，服务端可以反馈处理进度，客户端可以取消请求





___



## 三、一些有用的小工具



### - RQT：让节点交流可视化

    运行节点之后再终端里输入`ros2 run rqt_graph rqt_graph`就会出现窗口

### - RVIZ2:数据可视化工具，监控传感器、雷达等数据

    仍然是终端里输入`rviz2`

### - Gazebo:仿真模拟工具，可以搭建3D场景，模拟显示环境

​		终端里输入`gz sim shapes.sdf `启动 Gazebo.可以加参数 `-v 4` 显示更多调试信息
(碎碎念：就这三个我下了一天，特别是最后一个耗了至少六小时)











































[^1]: 解释器，顾名思义对命令行的解释。dash效率更高，bash功能更多可以提示用户